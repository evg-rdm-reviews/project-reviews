# –ü—Ä–æ–µ–∫—Ç ‚Äú–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á‚Äù. üïä (@lynxio).

[–¢–≥ –ø–æ—Å—Ç](https://t.me/zhukovsd_it_chat/53243/186874)

[–ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞](https://github.com/lynxiox/planboard)

---

## Planboadr-api

### JwtAuthenticationFilter –∏ JwtSevice

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π Jwt —Ñ–∏–ª—å—Ç—Ä ‚Äú–∏–∑ youtube‚Äù.

1. –ù–∞—Ä—É—à–∞–µ—Ç SRP, —Ç.–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:
    1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:
        
        ```java
        String authHeader = request.getHeader("Authorization");
        
        if (authHeader == null || !authHeader.startsWith("Bearer ")) {
            filterChain.doFilter(request, response);
            return;
        }
        String jwt = authHeader.substring(7);
        ```
        
        –ü—Ä–∏—á–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —É–ø—Ä–æ—â–µ–Ω–∞ –¥–æ –º–∏–Ω–∏–º—É–º–∞ - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —ç—Ç–æ –µ—Å—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å ‚ÄúBearer ‚Äú, –∞ —Ñ–æ—Ä–º–∞—Ç —Å–∞–º–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –ø–æ–ø–∞—Å—Ç—å —É–∂–µ –≤ JwtService –Ω–∏–∫–∞–∫ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –≤ `JwtService` —ç—Ç—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤–æ–∑—å–º–µ—Ç –Ω–∞ —Å–µ–±—è –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è claims, —á—Ç–æ, –∫–∞–∫ –Ω–µ —Å–ª–æ–∂–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è, —Ç–∞–∫–∂–µ –Ω–∞—Ä—É—à–∞–µ—Ç SRP. 
        
    2. –ü–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–π claim:
        
        ```java
        String userEmail = jwtService.extractUsername(jwt, true);
        ```
        
    3. –†–∞–±–æ—Ç–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:
        
        ```java
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        if (userEmail != null && authentication == null) {
            UserDetails userDetails = userDetailsService.loadUserByUsername(userEmail);
        
            if (jwtService.isValid(jwt, userDetails, true)) {
        
                String role = jwtService.extractRole(jwt, true);
                List<SimpleGrantedAuthority> authorities = List.of(new SimpleGrantedAuthority("ROLE_" + role));
                UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(
                        userDetails,
                        null,
                        authorities
                );
                token.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));
        
                SecurityContextHolder.getContext().setAuthentication(token);
            } else {
                response.setStatus(HttpStatus.UNAUTHORIZED.value());
                response.getWriter().write("Invalid access token");
            }
        }
        ```
        
        –ü—Ä–∏ —ç—Ç–æ–º –≤ —ç—Ç–æ–π —á–∞—Å—Ç–∏ —Ç–∞–∫–∂–µ —Å–æ–±—Ä–∞–Ω—ã —Ä–∞–∑–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, —Ä–∞–∑–º—ã–≤–∞—é—â–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ—Ç–æ–¥–∞ —Ñ–∏–ª—å—Ç—Ä–∞.
        
2. –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É–ª—É—á—à–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º:
    
    ```java
    String authHeader = request.getHeader("Authorization");
    
    if (authHeader == null || !authHeader.startsWith("Bearer ")) {
        filterChain.doFilter(request, response);
        return;
    }
    String jwt = authHeader.substring(7);
    ```
    
    1. –ò–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–æ–∫ –∏ —á–∏—Å–µ–ª:
        - "Authorization" ‚Üí HttpHeaders.AUTHORIZATION.
        - "Bearer " ‚Üí –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ BEARER_TOKEN_PREFIX.
        - 7 ‚Üí BEARER_TOKEN_PREFIX.length().
        
        –ö–æ–¥ –ø–æ —Å—É—Ç–∏ —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π, –Ω–æ –ø—Ä–æ—â–µ –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ —á—Ç–æ-—Ç–æ –≥–¥–µ-—Ç–æ –ø–æ–º–µ–Ω—è–µ—Ç—Å—è.
        
    2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é `org.springframework.util.StringUtils`:
        
        ```java
        private static final BEARER_PREFIX = "bearer ";
        
        public void doFilterInternal(...) {
            String authHeader = request.getHeader(HttpHeaders.AUTHORIZATION);
        		
            if (!StringUtils.startsWithIgnoreCase(authHeader, BEARER_PREFIX) {
                filterChain.dofilter(request, response);
                return;
            }
        }
        ```
        
        –ú–µ–Ω—å—à–µ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
        
    3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å—Ä–∞–∑—É –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ Bearer –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞ (–¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ —Ç—Ä–∏ —á–∞—Å—Ç–∏ —Ç–æ—á–∫–∞–º–∏).
    –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–∏–¥—É:
        
        ```java
        private static final Pattern TOKEN_PATTERN = 
        				Pattern.compile("^Bearer (?<token>[a-zA-Z0-9-._~+/]+=*)$", Pattern.CASE_INSENSITIVE);
        
        private String authHeader = HttpHeaders.AUTHORIZATION;
        
        private String resolveToken(HttpServletRequest request) {
            String authorization = request.getHeader(this.authHeader);
        		
            if (!StringUtils.startsWithIgnoreCase(authorziation, "bearer") {
                // –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å bearer, —Ç–æ fail-fast
            }
            Matcher matcher = TOKEN_PATTERN.matcher(authorziation);
            if (!matcher.matches()) {
            		// –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é - –≤—ã–¥–∞–µ–º –æ—à–∏–±–∫—É
            }
            return matcher.group("token");
        
        }
        ```
        
        –ë–æ–ª–µ–µ –≥–∏–±–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—â–∏–π —Å–æ–±–ª—é–¥–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞.
        
3. –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∫ api —Ç—Ä–µ–±—É–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
    
    ```java
    UserDetails userDetails = userDetailsService.loadUserByUsername(userEmail);
    ```
    
    –≠—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –≥–∞—Ä–∞–Ω—Ç–∏–∏ —Ç–æ–≥–æ, —á—Ç–æ –≤ subject —É–∫–∞–∑–∞–Ω–æ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω). –ù–æ —Å —É—á–µ—Ç–æ–º —Ç–æ–≥–æ, —á—Ç–æ –¥–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—Ç–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ç–æ –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ –±—ã–ª –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω, –∫–ª—é—á–∏ –ø–æ–¥–ø–∏—Å–∏ –Ω–µ –±—ã–ª–∏ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã, —Ç–æ –≤ subject –∞–ø—Ä–∏–æ—Ä–∏ –±—É–¥–µ—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –µ—Å—Ç—å –≤ –±–∞–∑–µ. –ü–æ—ç—Ç–æ–º—É –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –±–¥ —è–≤–ª—è—é—Ç—Å—è –ª–∏—à–Ω–∏–º–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏. –ò –º–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å—Å—è –Ω–∞ –¥–≤–µ –≤–µ—â–∏: –∞) –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ (–¥–µ–ª–∞–µ—Ç jsonwebtoken); –±) –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏ (—Ç–æ–∂–µ –¥–µ–ª–∞–µ—Ç jsonwebtoken, –∫–æ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –µ–≥–æ).
    
4. `@NonNull` - –∏–∑ `io.micrometer.common.lang`. –õ—É—á—à–µ –≤–∑—è—Ç—å –∞–Ω–∞–ª–æ–≥ –∏–∑ Spring, —Ç.–∫ –≤—Å–µ –∂–µ —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞.
5. –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–∫–µ–Ω–æ–º –≤ jsonwebtoken –º–æ–≥—É—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ—Ç–æ—Ä—ã—Ö —è –Ω–µ —É–≤–∏–¥–µ–ª –Ω–∏ –≤ —Ñ–∏–ª—å—Ç—Ä–µ, –Ω–∏ –≤ `JwtService`. –ò–∑ —ç—Ç–æ–≥–æ –º–æ–∂–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å 
6. `jwtService.extractUsername(jwt, true)` - —Ç–∏–ø `boolean` –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–µ–±—è –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –º–µ—Ç–æ–¥–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∫–æ–¥–∞. –ò –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–∞, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —ç—Ç–æ `true`.
–í—ã–∑–æ–≤ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø—Ä–∏–º–µ—á–∞—Ç–µ–ª–µ–Ω –µ—â–µ —Ç–µ–º, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ—Å–ª–µ–¥—É—é—â—É—é –ø—Ä–æ–≤–µ—Ä–∫—É `JwtService::isValid` –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ–π. –í–æ-–ø–µ—Ä–≤—ã—Ö, –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–ø—Ä—è–∂–µ–Ω–æ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Ç–æ–∫–µ–Ω–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —É —Ç–æ–∫–µ–Ω–∞ –µ—Å—Ç—å TTL, —Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ (–º–µ—Ç–æ–¥ `parse()` –∏–∑ `DefaultJwtParser`).
7. `jwtService.isValid(jwt, userDetails, true)`:
    1. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ `extractUsername()` - —Ç–æ–∫–µ–Ω —É–∂–µ –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω. –≠—Ç–æ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∂–µ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
    2. `UserDetails` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ—É–º–µ—Å—Ç–Ω–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–∫–µ–Ω–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Ä–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏ —É —Ç–µ–±—è —Ç–µ—Å–Ω–æ –ø–µ—Ä–µ–ø–ª–µ—Ç–∞–µ—Ç—Å—è —Å–æ Spring, –∏ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ —Ç–∞–º, –≥–¥–µ Spring-–∞ –Ω–µ—Ç.
    3. `isTokenExpierd()` - –∫–∞–∫ —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª, –µ—Å–ª–∏ —É —Ç–æ–∫–µ–Ω–∞ –µ—Å—Ç—å TTL, —Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–∞—Ä—Å–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ –Ω–µ –≤—ã—à–µ–ª. –ö —Ç–æ–º—É, —á—Ç–æ –æ–ø—è—Ç—å —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤ –æ—á–µ—Ä–µ–¥–Ω–æ–π —Ä–∞–∑ –±—É–¥–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–∫–µ–Ω–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ ‚Äú–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º‚Äù `isTokenExpired()` –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ `extractAllClaims()`.
    
    –ò–∑ –≤—Å–µ–≥–æ –≤—ã—à–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —è –±—ã —É–¥–µ–ª–∏–ª –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–±–ª–µ–º–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫ —Ç–æ–∫–µ–Ω–∞ –≤ —Ä–∞–º–∫–∞—Ö *–æ–¥–Ω–æ–≥–æ* –∑–∞–ø—Ä–æ—Å–∞. –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ –±–¥ –º–æ–∂–Ω–æ —Å–ø–∏—Å–∞—Ç—å –Ω–∞ ‚Äú—è —Ö—É–¥–æ–∂–Ω–∏–∫ —è —Ç–∞–∫ –≤–∏–∂—É‚Äù. –ê –∫–æ–ø–∏–ø–∞—Å—Ç –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–∫–µ–Ω–æ–º –∏–∑ youtube - –Ω–µ –∂–µ–ª–∞–Ω–∏–µ–º —É—Å–ª–æ–∂–Ω—è—Ç—å –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç. –ò –≤–æ—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —è –±—ã –≤—Å–µ –∂–µ –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞–ª –Ω–µ –ª–µ–Ω–∏—Ç—å—Å—è –∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫ —Å–ª–µ–¥—É–µ—Ç. –¢–µ–º –±–æ–ª–µ–µ, —á—Ç–æ —Å –Ω—É–ª—è –ø–∏—Å–∞—Ç—å –Ω–µ –Ω–∞–¥–æ - –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π jsonwebtoken –∏ Spring Security –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —É—Ä–æ–≤–Ω—è–º –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏.
    

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è

1. –î–ª—è —Å–≤–æ–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç—Ä–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:
    - –° –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `String` - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.
    - –° –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `Throwable`, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–º —Å–æ–±–æ–π –ø—Ä–∏—á–∏–Ω—É –¥–∞–Ω–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
    - C –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `String` –∏ `Throwable`, –ø–æ–∑–≤–æ–ª—è—é—â–∏–º–∏ —É–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏ –ø—Ä–∏—á–∏–Ω—É –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
    
    –í—Ç–æ—Ä–æ–π –∏ —Ç—Ä–µ—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω—É–∂–Ω—ã, –∫–æ–≥–¥–∞ —Ç—ã –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—à—å –≤ –∫–∞–∫–∏–µ-—Ç–æ —Å–≤–æ–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä.
    
2. `GlobalExceptionHandler` - —Ö–æ—á–µ—Ç—Å—è –∑–¥–µ—Å—å –≤–∏–¥–µ—Ç—å –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞. –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å —Å–æ–∑–¥–∞—Ç—å –¥–ª—è –æ—à–∏–±–æ–∫ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ProblemDetail` (RFC 9457).

### –°—É—â–Ω–æ—Å—Ç–∏ –∏ –î–¢–û

1. `public class User implements UserDetails` - –Ω–µ –Ω–∞–¥–æ —Å–º–µ—à–∏–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∏ –∏ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
2. `@OneToMany(‚Ä¶, fetch = FetchType.LAZY)` - –¥–ª—è –≤—Å–µ—Ö `‚Ä¶ToMany` –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π `LAZY` - —ç—Ç–æ `FetchType` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —è–≤–Ω–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –µ–≥–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
3. `@ManyToOne(fetch = FetchType.EAGER)` - –¥–ª—è –≤—Å–µ—Ö `‚Ä¶ToOne` –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π —ç—Ç–æ `FetchType` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —è–≤–Ω–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –µ–≥–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
4. –î–ª—è –î–¢–û –∏—Å–ø–æ–ª—å–∑—É—é —Ä–µ–∫–æ—Ä–¥—ã.

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

1. –í —á–µ–º –∏–¥–µ—è –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –º–∞–ø–ø–∏–Ω–≥–∞ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –∏ –≤ OpenAPI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—é—Ç?
2. –•–æ—Ç—å REST –∏ –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–∞–≥–æ–ª—ã –≤ —ç–Ω–¥-–ø–æ–∏–Ω—Ç–∞—Ö, –µ—Å–ª–∏ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –∫–æ–Ω–µ—á–Ω–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ –ø—É—Ç–∏ (RPC —Å—Ç–∏–ª—å), –Ω–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –Ω–µ –¥–µ–ª–∞—Ç—å, —Ç.–∫ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–º–æ–∂–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç—Ä–µ–±—É–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å HTTP –º–µ—Ç–æ–¥–æ–º –∑–∞–ø—Ä–æ—Å–∞.
    
    ```java
    @PatchMapping("/{id}/update") // -> @PatchMapping("/{id}")
    @DeleteMapping("/{id}/delete") // -> @DeleteMapping("/{id}")
    ```
    

### –°–µ—Ä–≤–∏—Å

1. –í `AuthService` –º–µ—Ç–æ–¥ `singup()`:
    
    ```java
    User user = userMapper.toUser(registrationUserDto);
    user.setPassword(passwordEncoder.encode(registrationUserDto.getPassword()));
    ```
    
    –í –¥–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –¥—Ç–æ –≤ —Å—É—â–Ω–æ—Å—Ç—å –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç —Ç–æ, —á—Ç–æ –≤ —Å—É—â–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –ï—Å–ª–∏ –æ–±—ä—è–≤–∏—Ç—å –º–µ—Ç–æ–¥ —Å –ª–æ–≥–∏–∫–æ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–∞–º–æ–º `UserMapper`, —Ç–æ —ç—Ç–æ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ–º SRP.
    
    - –ü–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –º–∞—Ä–∫–µ—Ä–Ω—É—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ-–Ω–∏–±—É–¥—å —Ç–∏–ø–∞ —Ç–∞–∫–æ–≥–æ:
        
        ```java
        **@Qualifier // –∏–∑ –º–∞–ø—Å—Ç—Ä–∞–∫—Ç–∞**
        @Target({ElementType.TYPE, ElementType.METHOD})
        @Retention(RetentionPolicy.CLASS)
        public @interface EncodedMapping {
        }
        ```
        
    - –°–æ–∑–¥–∞–µ–º –∫–ª–∞—Å—Å, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –∫–æ–¥–∏—Ä–æ–≤–∫—É –ø–∞—Ä–æ–ª—è. –ù–∞–¥ –º–µ—Ç–æ–¥–æ–º –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞–≤–∏–º –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é —Å–æ–∑–¥–∞–ª–∏ —Ä–∞–Ω–µ–µ:
        
        ```java
        @Component
        public class PasswordEncodingMapper {
        
            private static final PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
        
            @EncodedMapping
            public static String encode(String value) {
                return passwordEncoder.encode(value);
            }
        }
        ```
        
        –ó–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Bcrypt –∞–ª–≥–æ—Ä–∏—Ç–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, –Ω–æ —ç—Ç–æ —Å–æ–ø—Ä—è–∂–µ–Ω–æ —Å –Ω–∞—Ä—É—à–µ–Ω–∏–µ–º OCP. –ü–æ–¥—É–º–∞–π –∫–∞–∫ —ç—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.
        
    - –í —Å–∞–º–æ–º –º–∞–ø–ø–µ—Ä–µ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@Mapper` –∏ `@Mapping`:
        
        ```java
        @Mapper(componentModel = MappingConstants.ComponentModel.SPRING,
        			**uses = PasswordEncodingMapper.class**)
        public interface UserMapper {
        
            @Mapping(target = "id", ignore = true)
            **@Mapping(source = "password", target = "password", qualifiedBy = EncodedMapping.class)**
            User mapToEntity(UserDto userDto);
        }
        ```
        
2. `user.setRole(Role.USER)` - –µ—Å–ª–∏ —Ä–æ–ª—å `USER` –∑–∞–¥–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Ç–æ —ç—Ç–æ —Ç–æ–∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ `UserMapper`. –û–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ - —Å –ø–æ–º–æ—â—å—é `@AfterMapping` –º–µ—Ç–æ–¥–∞.
3. –†–æ–ª–∏ –Ω–∏–∫–∞–∫ –Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ.
4. `public interface UserService extends UserDetailsService` - —Ç–æ –∂–µ —Å–∞–º–æ–µ, –∫–∞–∫ –∏ –≤ —Å—É—â–Ω–æ—Å—Ç—è—Ö.
5. `TaskServiceImpl`.
    1. updateTask():
        - –°—Ç–∞–≤—à–∏–π —É–∂–µ –∫–ª–∞—Å—Å–∏–∫–æ–π –ª–∏—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å –≤ –±–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏:
            
            ```java
            if (StringUtils.hasText(requestUpdateTaskDto.getTitle()) &&
                    !requestUpdateTaskDto.getTitle().equals(task.getTitle()) &&
                    taskRepository.existsByTitleAndUser(requestUpdateTaskDto.getTitle(), user)) {
                throw new TaskAlreadyExistsException("Task with this title already exists for this user");
            }
            ```
            
            –ï—Å–ª–∏ –≤ —Ö–æ–¥–µ –∫–∞–∫–∏—Ö-—Ç–æ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –±–¥ –±—É–¥–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å, —Ç–æ –°–£–ë–î –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –ü–æ—ç—Ç–æ–º—É –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ–≥–æ (–≤ Spring —ç—Ç–æ DataIntegrityViolationException) –∏ –Ω–µ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.
            
        - –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `@Transactional` —Å—É—â–Ω–æ—Å—Ç—å `Task` –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ managed –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ Hibernate –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ —Å —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ. –≠—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –±—ã—Å—Ç—Ä–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –º–µ—Ç–æ–¥–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–∞–∫–∞—è-–ª–∏–±–æ –ª–æ–≥–∏–∫–∞, —Å–ø–æ—Å–æ–±–Ω–∞—è –∑–∞—Ç—è–Ω—É—Ç—å –ø—Ä–æ—Ü–µ—Å—Å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤—ã–∑–æ–≤ `TaskRepository::save` –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–∏—à–Ω–∏–º. –¢.–µ —ç—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞, –Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞ –∑–∞–º–µ—Ç–∫—É.
    2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∞–ø–¥–µ–π—Ç:
        
        ```java
            private void updateTaskFields(Task task, RequestUpdateTaskDto dto) {
                if (dto.getTitle() != null && !Objects.equals(task.getTitle(), dto.getTitle())) {
                    task.setTitle(dto.getTitle());
                }
                if (dto.getDescription() != null && !Objects.equals(task.getDescription(), dto.getDescription())) {
                    task.setDescription(dto.getDescription());
                }
                if (dto.getIscompleted() != null) {
                    task.setIscompleted(dto.getIscompleted());
                    task.setCompletedAt(dto.getIscompleted() ? LocalDateTime.now() : null);
                }
            }
        ```
        
        –ï—Å–ª–∏ —É —Å—É—â–Ω–æ—Å—Ç–∏ –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ –ø–æ–ª—è, —Ç–æ –ø—Ä–∏–¥–µ—Ç—Å—è –∏–∑–º–µ–Ω—è—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ MapStruct - —ç—Ç–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –º–∞–ø–ø–µ—Ä–µ —Å–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑ –¥—Ç–æ:
        
        ```java
        @Mapper(componentModel = MappingConstants.ComponentModel.SPRING,
        				nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)
        public interface TaskMapper {
        
        		void updateTaskFromDto(RequestUpdateTaskDto dto, @MappingTarget Task task);
        }
        ```
        
        –í —Å–µ—Ä–≤–∏—Å–µ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ—Ç –º–µ—Ç–æ–¥:
        
        ```java
        @Transactional
        public ResponseTaskDto updateTask(User user, Long id, RequestUpdateTaskDto requestUpdateTaskDto) {
        taskRepository.findByIdAndUser(id, user)
        				.map(task -> taskMapper.updateTaskFromDto(dto, task))
        				.map(updatedTask -> taskMapper.taskToResponseTaskCreateDto(updatedTask))
        				.orElseThrow(() -> new TaskNotFoundException());
        }
        ```
        
    3. `taskMapper.taskToResponseTaskCreateDto(task)` - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ. –î—Ç–æ —É —Ç–µ–±—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `ResponseTaskDto`, –∞ –∑–Ω–∞—á–∏—Ç –∏ –º–µ—Ç–æ–¥ –ø—É—Å—Ç—å –ª—É—á—à–µ –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç—Å—è —Å —ç—Ç–∏–º: `toResponseTaskDto()`.

## planboard-scheduler

1. `MessageService`.
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `generateDailyReport()` —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º –∏ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º –∑–∞–¥–∞—á–∞–º. –ü–æ–¥—É–º–∞–π –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–º –∑–∞–¥–∞—á–∞–º) –Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥.

## Messaging

–î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –ø–æ –¢–ó –≤—ã–±—Ä–∞–Ω–∞ Kafka. Spring –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á—É—Ç—å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é –Ω–∞–¥ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ `KafkaProducer`, `KafkaConsumer` - `KafkaTemplate`. –í –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –ø–ª–æ—Ö–æ–≥–æ, –Ω–æ —ç—Ç–æ –Ω–µ –ø—Ä–µ–¥–µ–ª. –¢–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, Spring Cloud Stream –∏ Spring Cloud Functions –º–æ–¥—É–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Ä–∞–±–æ—Ç—É, –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—É—é –∫ –∫–∞–∫–æ–º—É-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –±—Ä–æ–∫–µ—Ä—É. –≠—Ç–æ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∫–∞–∫–∏—Ö-—Ç–æ –±–æ–ª–µ–µ —É–≥–ª—É–±–ª–µ–Ω–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π Kafka (–∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞) - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—É–¥–µ—Ç –±–∞–∑–æ–≤—ã—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∏–∫–∞–∫–∏—Ö –æ—Å–æ–±—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –±—Ä–æ–∫–µ—Ä–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏ —Ö–≤–∞—Ç–∏—Ç —Ç–æ–≥–æ, —á—Ç–æ Kafka –¥–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏.

–ü—Ä–∏ —ç—Ç–æ–º, –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–π—Ç–∏ —Å –æ–¥–Ω–æ–≥–æ –±—Ä–æ–∫–µ—Ä–∞ –Ω–∞ –¥—Ä—É–≥–æ–π, —Ç–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞, –≤—Å–µ —á—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è - —ç—Ç–æ –ø–æ–º–µ–Ω—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–æ–∫–µ—Ä–∞ –≤ application.properties/yml. –ù–∏–∫–∞–∫–∏—Ö –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –≤–µ—â–µ–π –∫–∞–∫:

```java
Map<String, Object> configProps = new HashMap<>();
configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);
configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);
configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);
return new DefaultKafkaProducerFactory<>(configProps);
```

–í –∫–æ–¥–µ –∂–µ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (—Ç.–µ –µ—Å–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–µ) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `StreamBridge`, –∞ –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ ‚Äú–ø–æ—Ç–æ–∫–æ–≤–æ–º‚Äù —Å—Ç–∏–ª–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–≤–µ—Ç - —Ç–æ Spring Functions –ø–æ–∑–≤–æ–ª—è—é—Ç —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –æ–±—ä–µ–º–æ–º —Ä–∞–±–æ—Ç—ã. –ü—Ä–∏ —ç—Ç–æ–º –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤ —Ç–æ–º —á–∏—Å–ª–µ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è —É–∂–µ –æ—Ç —É—Å—Ç–∞—Ä–µ–≤–∞—é—â–µ–≥–æ `@KafkaListener` –≤ —Å–µ—Ä–≤–∏—Å–µ-–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ.

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –≤ Spring Functions –º–Ω–µ –ª–∏—á–Ω–æ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è - —ç—Ç–æ —Ç–æ, —á—Ç–æ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—ä—è–≤–ª—è—Ç—å –∫–∞–∫ Bean Definition-—ã —á–µ—Ä–µ–∑ `@Bean`.

### –†–∞–∑–Ω–æ–µ

- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π wildcard (‚Äù*‚Äù) –Ω–∏ —Å –æ–±—ã—á–Ω—ã–º–∏, –Ω–∏ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏.
- –í—Å–µ, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–∏—Ç—É–∞—Ü–∏—è–º–∏, –Ω–∞–¥–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å.
- docker:
    - –ø–æ—á–∏—Ç–∞–π –ø—Ä–æ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–µ Jar —Ñ–∞–π–ª—ã –∏ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ Dockerfile. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å jib –ø–ª–∞–≥–∏–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤.
    - –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤–Ω–µ—à–Ω–∏–π –º–∏—Ä –Ω–∏–∫–∞–∫ –Ω–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É –æ–±—â–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∏–º–µ—é—â–∏–µ—Å—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç —Ö–æ—Å—Ç–∞ –Ω–µ –Ω–∞–¥–æ.
    - –∫–æ–≥–¥–∞ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–æ–≥–æ, —Ç–æ –Ω–∞–¥–æ –ø–æ–º–∏–º–æ depends_on —É–∫–∞–∑–∞—Ç—å —Ç–∞–∫–∂–µ –∏ —É—Å–ª–æ–≤–∏–µ (—Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω, —Å–µ—Ä–≤–∏—Å ‚Äú–∑–¥–æ—Ä–æ–≤‚Äù –∏ —Ç.–¥).

## –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ª–∏—à—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –º–∏—Ä–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –∏ –ø–æ—ç—Ç–æ–º—É –º–Ω–æ–≥–∏—Ö –≤–µ—â–µ–π –æ–Ω –Ω–µ —Ç—Ä–µ–±—É–µ—Ç, –Ω–æ —è —Å—á–∏—Ç–∞—é –≤–∞–∂–Ω—ã–º –≤—Å–µ –∂–µ –¥–æ–Ω–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é —Å–ª–µ–¥—É–µ—Ç –∑–Ω–∞—Ç—å –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ —Å–µ—Å—Ç—å –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å–µ–¥—å–º–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

1. –ü–µ—Ä–≤–æ–µ, —á—Ç–æ —Ö–æ—á–µ—Ç—Å—è –æ—Ç–º–µ—Ç–∏—Ç—å - —ç—Ç–æ —Ç–æ, —á—Ç–æ —Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–¥–µ–ª–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç—ã. –ù–∏–∫–∞–∫–∏—Ö —É–ø—Ä–æ—â–µ–Ω–∏–π –≤ –≤–∏–¥–µ –º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Ç.–¥. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
2. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã - —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è, —á–µ–≥–æ —Å –º–æ–Ω–æ–ª–∏—Ç–∞–º–∏ –¥–æ–±–∏—Ç—å—Å—è –∫—Ä–∞–π–Ω–µ —Å–ª–æ–∂–Ω–æ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π —Ç–≤–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –æ–±—â–µ–π —Å–∏—Å—Ç–µ–º–µ –≤ –≤–∏–¥–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≤—Ä–µ–º—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤. –ò —ç—Ç–æ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.
    1. –¢–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É —Ç–µ–±—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –°–µ–π—á–∞—Å —Ç—ã —ç—Ç–æ–≥–æ –Ω–µ –∑–∞–º–µ—á–∞–µ—à—å, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å N —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ª—é–±–æ–≥–æ –∏–∑ —Ç–≤–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∏ –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —á—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö), —Ç–æ –ø—Ä–∏–¥–µ—Ç—Å—è —ç—Ç–æ –¥–µ–ª–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–º–µ—é—â–µ–≥–æ—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É. –ò –µ—Å–ª–∏ –º—ã –æ—Å—Ç–∞–µ–º—Å—è –≤ —Ä–∞–º–∫–∞—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Spring, —Ç–æ Spring Cloud Configuration Server –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –∏–º–µ—é—â–∏–µ—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤: –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª–∞—Ö –Ω–∞ –¥–∏—Å–∫–µ, –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ classpath, –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ git –∏ —Ç.–¥.
    –î—Ä—É–≥–æ–π –º–æ–º–µ–Ω—Ç - —ç—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤/—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è –∫ Vault, —Å –∫–æ—Ç–æ—Ä—ã–º —É Spring —Ç–∞–∫–∂–µ –µ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—É Spring Config Server –≤ —Ç–æ–º —á–∏—Å–ª–µ, –ø—Ä–∏—á–µ–º –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å—Ä–∞–∑—É –∏ git –∏ vault –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π). –ß—Ç–æ–±—ã —Å–µ—Ä–≤–∏—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–æ–≥–ª–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ - –µ—Å—Ç—å Spring Cloud Bus.
    2. –°–ª–µ–¥—É—é—â–∏–π –º–æ–º–µ–Ω—Ç - —ç—Ç–æ Service Discovery. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç —Ç–æ, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –≤ —Ü–µ–ª–æ–º –¥–æ–ª–∂–Ω–∞ –∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–∞–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å, –∏ –∫–∞–∫ –¥–æ –Ω–∏—Ö –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è (–∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –∏ —Ç.–¥). –î–ª—è —ç—Ç–æ–≥–æ –≤ Spring –º–æ–∂–Ω–æ –≤–∑—è—Ç—å Spring Cloud Netfilx (Eureka).
    3. –î–∞–ª–µ–µ, —ç—Ç–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —Å —Å–µ—Ä–≤–∏—Å–æ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–ª—É–∂–± (Eureka) —Å–ø–æ—Å–æ–±–µ–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø–æ —Ä–∞–∑–Ω—ã–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º —Å–µ—Ä–≤–∏—Å–∞. –í —Å–µ–¥—å–º–æ–º –∑–∞–¥–∞–Ω–∏–∏, –≤—Ä–æ–¥–µ –±—ã –Ω–µ—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –º–µ–∂–¥—É –∫–æ—Ç–æ—Ä—ã–º–∏ –±—ã –±—ã–ª–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–∞–ø—Ä–∏–º–µ—Ä `RestClient`, –∏ –ø–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω—ã–π –∞—Å–ø–µ–∫—Ç –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç—Å—è —Ç–æ–π –∂–µ Kafka.
    4. –ü–∞—Ç—Ç–µ—Ä–Ω—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å—é. –î–ª—è –Ω–∞—á–∞–ª–∞ —Å—Ç–æ–∏—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å Circuit Breaker –∏ Fallback pattern. –ü–µ—Ä–≤—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–ª—É—á–∞–µ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤: –ø–æ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞, –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞ –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏ —Ç.–¥. –í—Ç–æ—Ä–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (–≤ —Ç–æ–º —á–∏—Å–ª–µ –æ—Ç–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç).
    5. Gateway. –Ø–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–æ–π —á–∞—Å—Ç—å—é –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –ø–æ–∑–≤–æ–ª—è—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∫–≤–æ–∑–Ω—É—é –ª–æ–≥–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä - —ç—Ç–æ security. –¢–∞–∫ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤ –∫–∞–∂–¥–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ª–æ–≥–∏–∫—É - —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, –ø–æ—Å–∫–æ–ª—å–∫—É –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ gateway, –≥–¥–µ –∫ –Ω–∏–º –∏ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
    6. Observability. –ö—Ä–∞–π–Ω–µ –≤–∞–∂–Ω—ã–π –∞—Å–ø–µ–∫—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—á–µ—Ç–∞–µ—Ç –≤ —Å–µ–±–µ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫, –∞–≥—Ä–µ–≥–∞—Ü–∏—é –ª–æ–≥–æ–≤ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É. –í —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤ —Ü–µ–ª–æ–º, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ª–æ–≥–∏ —Ç–æ–≥–æ –∏–ª–∏ –∏–Ω–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã. –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: Actuator, Prometheus, Grafana (–≤–∫–ª—é—á–∞—è Loki –∏ Alloy - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–æ–≥ Promtail) –∏ OpenTelemetry (—É—Å—Ç–∞—Ä–µ–≤–∞—é—â–∏–µ –∞–Ω–∞–ª–æ–≥–∏ Spring Cloud Sleuth + Zipkin).
    –°–ø–µ—Ä–≤–∞ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–æ–π –∑–∞–ø—Ä–æ—Å–æ–≤ –≤—Ä—É—á–Ω—É—é. –î–ª—è —ç—Ç–æ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏. –¢.–µ –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è —Å —Ç–µ–º, –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã —Ü–µ–ª–∏–∫–æ–º –∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç.

–Ø –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –æ–ø—É—â—É –∑–¥–µ—Å—å —Ç–µ–º—É —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ (CQRS, Saga –∏ —Ç.–¥) –∏ OAuth2, –ø–æ—Å–∫–æ–ª—å–∫—É –≤—Å–µ, —á—Ç–æ —É–ø–æ–º—è–Ω—É–ª —Ä–∞–Ω–µ–µ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –≤–∫–ª—é—á–∞—è –≤—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞. –ù–æ –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º, —Ç–æ —ç—Ç–æ –¥–æ–±–∞–≤–∏—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π –∏ –∫—Ä–∞–π–Ω–µ –±—ã –∑–∞—Ç—è–Ω—É–ª–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é; –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ OAuth2/OIDC, —Ç–æ —Ä–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –≤—Ä—É—á–Ω—É—é —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –ø—É–Ω–∫—Ç–æ–≤ –¢–ó, –ø–æ—ç—Ç–æ–º—É –≥–æ—Ç–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ç–∏–ø–∞ Keycloak –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ –±—É–¥–µ–º.
–°—Ç–æ–∏—Ç —Ç–∞–∫–∂–µ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à—É—é —Ä–µ–º–∞—Ä–∫—É –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ Spring Cloud —Å—Ç–µ–∫–∞. –ü–æ—Å–∫–æ–ª—å–∫—É –º–Ω–æ–≥–æ–µ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –≤—ã—à–µ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç—Å—è –∏–ª–∏ –æ–±–ª–∞—á–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º –∏–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä Docker swarm, K8S, —Ç–æ –¥–∞–∂–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ Spring Cloud –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –ª–∏—à–Ω–µ–π —Ç—Ä–∞—Ç–æ–π –≤—Ä–µ–º–µ–Ω–∏, —Ç–µ–º –Ω–µ –º–µ–Ω–µ–µ, –ø–æ–≤—Ç–æ—Ä—é—Å—å, —è –ø–æ—Å—Ç–∞—Ä–∞–ª—Å—è —Å–æ–±—Ä–∞—Ç—å —Ç–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å, –∏ –Ω–∞ —á—Ç–æ –Ω–µ —É–π–¥–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
